language: cpp

# Use Latest CMake
addons:
  apt:
    sources:
      - george-edison55-precise-backports
    packages:
      - cmake-data
      - cmake

# Build Agents
matrix:
  include:

    # Gcc 9 Environment
    - name: gcc 9
      os: linux
      dist: xenial
      sudo: required
      addons:
        apt:
          sources:
            - ubuntu-toolchain-r-test
          packages:
            - g++-9
            - libsdl2-dev
      env:
        - CCC_FOR_BUILD="gcc-9"
        - CXX_FOR_BUILD="g++-9"
        - TARGET="GCC"

    # Clang 8 Environment
    - name: clang 8
      os: linux
      dist: xenial
      sudo: required
      addons:
        apt:
          sources:
            - llvm-toolchain-trusty-8
            - ubuntu-toolchain-r-test
          packages:
            - clang-8
            - g++-9
            - libsdl2-dev
      env:
        - CCC_FOR_BUILD="clang-8"
        - CXX_FOR_BUILD="clang++-8"
        - TARGET="CLANG"

# Configure Environment
before_install:
  - export CC=${CC_FOR_BUILD}
  - export CCX=${CCX_FOR_BUILD}
  - export TRAVIS_COMPILER=${CXX}

# Build
script:
  - if [ "$TARGET" == "GCC" ] then ./ci/travis-default.sh; fi
  - if [ "$TARGET" == "CLANG" ] then ./ci/travis-default.sh; fi
